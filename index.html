<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ashish — Ultra-Cinematic Portfolio</title>
<meta name="description" content="Ultra-cinematic interactive portfolio with parallax, code rain, morphing blobs, particles, animated borders, and more." />
<style>
/* =========================================================
   Reset + Base
   ========================================================= */
:root{
  --bg-0: #030303;
  --bg-1: #060608;
  --glass: rgba(255,255,255,0.02);
  --fg: #eaeaea;
  --muted: #9a9a9a;
  --accent-a: #00f0ff;   /* cyan */
  --accent-b: #ff6b35;   /* orange */
  --accent-c: #9b5cff;   /* purple (used sparingly) */
  --card: #0f0f0f;
  --glass-2: rgba(255,255,255,0.03);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:var(--bg-0);color:var(--fg);font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
a{color:inherit}
img{max-width:100%;display:block}
button{font:inherit}

/* =========================================================
   Global Layout
   ========================================================= */
body{
  overflow-x:hidden;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.45;
  background-image:
    radial-gradient(1200px 600px at 10% 10%, rgba(0,240,255,0.03), transparent 8%),
    radial-gradient(900px 500px at 90% 85%, rgba(255,107,53,0.03), transparent 10%),
    linear-gradient(180deg, var(--bg-1), var(--bg-0));
  transition: background 800ms linear;
}

/* prefers-reduced-motion: disable heavy animations */
@media (prefers-reduced-motion: reduce) {
  :root { --motion-scale: 0; }
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* =========================================================
   Cinematic overlay: vignette + film grain + letterbox bars
   ========================================================= */
.cinematic {
  position:fixed; inset:0; pointer-events:none; z-index:9997;
  mix-blend-mode:overlay;
}
.cinematic .vignette {
  position:absolute; inset:0; background:radial-gradient(60% 60% at 50% 40%, rgba(0,0,0,0) 30%, rgba(0,0,0,0.55) 100%);
  pointer-events:none;
}
.cinematic .film-bars {
  position:absolute; left:0; right:0; top:0; height:6vh; background:linear-gradient(180deg, rgba(0,0,0,0.6), transparent); pointer-events:none;
}
.cinematic .film-bars.bottom { top:auto; bottom:0; transform:translateY(2vh); }

/* soft bokeh glows */
.bokeh {
  position:fixed; pointer-events:none; z-index:0; inset:0; mix-blend-mode:screen;
}

/* =========================================================
   Header / Theme controls
   ========================================================= */
.header {
  position:fixed; top:18px; left:18px; display:flex; gap:12px; align-items:center; z-index:9998;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:12px; padding:8px; border:1px solid rgba(255,255,255,0.03);
}
.header .brand { font-weight:800; letter-spacing:1px; color:var(--fg); padding:6px 10px; border-radius:8px; display:inline-flex; align-items:center; gap:8px;}
.header button { background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--fg); padding:8px 12px; border-radius:8px; cursor:pointer; }
.header .small { font-size:0.85rem; opacity:0.9; }

/* =========================================================
   Custom cursor (dot + ring)
   ========================================================= */
.cursor-dot { position:fixed; width:12px; height:12px; border-radius:50%; background:var(--accent-a); transform:translate(-50%,-50%); pointer-events:none; z-index:9999; transition:transform .12s cubic-bezier(.2,.8,.2,1), background .18s }
.cursor-ring { position:fixed; width:36px; height:36px; border-radius:50%; border:2px solid rgba(255,255,255,0.08); transform:translate(-50%,-50%); pointer-events:none; z-index:9999; transition:transform .14s ease; }

/* expand/shrink states */
.cursor-dot.expand { transform:translate(-50%,-50%) scale(3); background:var(--accent-b) }
.cursor-ring.hidden { opacity:0; transform:translate(-50%,-50%) scale(.6); }

/* =========================================================
   Hero: giant title + code rain canvas + morph blob
   ========================================================= */
.section-hero {
  min-height:100vh; display:flex; align-items:center; justify-content:center; text-align:center; position:relative; overflow:hidden; padding:48px 20px;
  perspective:1200px;
}
.hero-content {
  z-index:10; max-width:1200px; width:100%; transform-style:preserve-3d;
}
.title {
  font-size:clamp(3rem,9vw,9.2rem); font-weight:900; line-height:0.92; letter-spacing:-2px;
  background:linear-gradient(90deg, var(--accent-a), var(--accent-b), var(--accent-c)); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  margin-bottom:16px; transform: translateZ(40px) rotateX(0.01deg);
}
.subtitle { font-size:clamp(1rem,2.5vw,1.5rem); opacity:.86; margin-bottom:28px; transform: translateZ(30px) }

/* code rain canvas sits behind hero */
#codeRain { position:absolute; inset:0; z-index:2; pointer-events:none; mix-blend-mode:screen; opacity:0.22; filter:blur(0.6px) contrast(0.9) }

/* morphing blob (SVG) with goo */
.blob-wrap { position:absolute; inset:auto; z-index:3; pointer-events:none; transform-origin:center; opacity:0.7 }
.blob-wrap svg { width:900px; height:500px; display:block; transform:translate(-50%,-50%); }

/* cinematic subtitle accent line */
.hero-cta { display:flex; gap:12px; justify-content:center; margin-top:18px; transform: translateZ(20px); }

/* =========================================================
   Sections: consistent card style + scroll-synced glowing borders
   ========================================================= */
.section {
  padding:120px 20px; min-height:85vh; display:flex; align-items:center; justify-content:center; position:relative; overflow:visible;
}
.card {
  width:100%; max-width:1100px; padding:48px; border-radius:20px; background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.03); box-shadow: 0 30px 80px rgba(0,0,0,0.6);
  transform: translateY(40px) rotateX(0.01deg); opacity:0; transition: transform 900ms cubic-bezier(.2,1,.22,1), opacity 600ms ease-out;
  will-change: transform, opacity;
  position:relative;
  overflow:visible;
}
.card.visible { transform:translateY(0); opacity:1; }

/* glowing borders (animated by JS on scroll) */
.card .glow-border {
  position:absolute; inset:-2px; pointer-events:none; border-radius:20px; padding:2px;
  background: linear-gradient(90deg, rgba(0,240,255,0.12), rgba(255,107,53,0.12));
  mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
  -webkit-mask-composite: xor;
  mix-blend-mode:screen; opacity:0; transition:opacity .6s ease, transform .6s ease;
}

/* inside content */
.card h3 { font-size:clamp(1.6rem,2.8vw,2.4rem); margin-bottom:12px; color:var(--fg) }
.card p { color:var(--muted); line-height:1.7; font-size:1rem; margin-bottom:18px; }

/* skill grid with stagger */
.skills-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:18px; margin-top:18px }
.skill { padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); transition:transform 400ms cubic-bezier(.2,.9,.2,1), box-shadow 300ms; transform-origin:center; }
.skill:hover { transform:translateY(-8px) scale(1.02); box-shadow:0 12px 40px rgba(0,0,0,0.6); }

/* cinematic divider */
.divider { height:1px; width:80%; margin:20px auto; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.04), transparent); border-radius:4px }

/* CTA */
.cta-row { display:flex; gap:16px; justify-content:center; margin-top:18px; flex-wrap:wrap }
.btn {
  border-radius:999px; padding:14px 28px; border:2px solid rgba(255,255,255,0.06); background:transparent; color:var(--fg); cursor:pointer; font-weight:700;
  transition:all 240ms cubic-bezier(.2,.9,.2,1);
}
.btn-primary { background:linear-gradient(90deg, rgba(0,240,255,0.12), rgba(255,107,53,0.12)); border-color:rgba(255,255,255,0.08); }
.btn:hover { transform:translateY(-6px); box-shadow:0 20px 60px rgba(0,0,0,0.6) }

/* =========================================================
   Code sample / Matrix rain small card (extra cinematic)
   ========================================================= */
.code-sample { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size:.92rem; line-height:1.4; background:rgba(0,0,0,0.35); padding:18px; border-radius:12px; color:#bfefff; border:1px solid rgba(255,255,255,0.02); overflow:auto; max-height:360px; }

/* =========================================================
   Code-rain overlay for hero (canvas) styled separately in JS
   ========================================================= */

/* =========================================================
   Footer
   ========================================================= */
footer { padding:56px 20px; text-align:center; color:var(--muted); }

/* =========================================================
   Responsive tweaks
   ========================================================= */
@media (max-width:900px){
  .card { padding:28px; border-radius:14px }
  .title { font-size: clamp(2.2rem, 14vw, 5rem) }
  .hero { padding:36px 16px }
}

/* minimal keyboard focus outlines */
:is(a,button,input,textarea):focus { outline: 3px solid rgba(0,240,255,0.12); outline-offset:3px; border-radius:8px }
</style>
</head>
<body>

<!-- CINEMATIC OVERLAYS -->
<div class="cinematic" aria-hidden="true">
  <div class="vignette"></div>
  <div class="film-bars"></div>
  <div class="film-bars bottom"></div>
</div>

<!-- BOKEH / GLOW LAYERS -->
<div class="bokeh" aria-hidden="true" id="bokehLayer"></div>

<!-- HEADER CONTROLS -->
<div class="header" role="navigation" aria-label="Controls">
  <div class="brand"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><defs></defs><path d="M3 12h18M12 3v18" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg><span style="font-weight:700">ASHISH</span></div>
  <button id="toggleSound" title="Toggle ambient sound (off by default)">Sound: Off</button>
  <button id="toggleEffects" title="Toggle heavy effects">Effects: On</button>
  <div class="small" aria-hidden="true">Ultra — Cinematic</div>
</div>

<!-- Custom Cursor -->
<div class="cursor-dot" id="cursorDot" aria-hidden="true"></div>
<div class="cursor-ring" id="cursorRing" aria-hidden="true"></div>

<!-- Hero Section -->
<section class="section-hero" id="hero" aria-label="Hero">
  <!-- Code rain canvas (behind) -->
  <canvas id="codeRain" aria-hidden="true"></canvas>

  <!-- Morph blob -->
  <div class="blob-wrap" id="blobWrap" aria-hidden="true" style="left:50%; top:50%; position:absolute; transform:translate(-50%,-30%); pointer-events:none; z-index:2;">
    <svg viewBox="0 0 800 500" preserveAspectRatio="xMidYMid meet">
      <defs>
        <filter id="goo">
          <feGaussianBlur in="SourceGraphic" stdDeviation="14" result="blur"/>
          <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 22 -7" result="goo"/>
          <feBlend in="SourceGraphic" in2="goo" />
        </filter>
      </defs>
      <g filter="url(#goo)">
        <path id="blobPath" fill="url(#blobGrad)"></path>
      </g>
      <defs>
        <linearGradient id="blobGrad" x1="0" x2="1" y1="0" y2="1">
          <stop offset="0%" stop-color="#00f0ff"/>
          <stop offset="50%" stop-color="#9b5cff"/>
          <stop offset="100%" stop-color="#ff6b35"/>
        </linearGradient>
      </defs>
    </svg>
  </div>

  <!-- Hero content (front) -->
  <div class="hero-content" id="heroContent" role="region" aria-label="Introduction">
    <h1 class="title" id="mainTitle">HI, I'M ASHISH.</h1>
    <p class="subtitle">Creative developer — I build interactive, cinematic, and delightfully excessive web experiences.</p>

    <div class="hero-cta">
      <button class="btn btn-primary" id="btnContact">Get In Touch</button>
      <button class="btn" id="btnScroll">Explore</button>
    </div>
  </div>
</section>

<!-- About Section -->
<section class="section" id="about">
  <div class="card" id="cardAbout" role="article" aria-labelledby="aboutTitle">
    <div class="glow-border" id="glowAbout" aria-hidden="true"></div>
    <h3 id="aboutTitle">About Me</h3>
    <p>I obsess over motion, craft, and micro-interactions. I make websites feel like living objects — tactile, dramatic, and memorable.</p>
    <div class="divider"></div>
    <div class="skills-grid" id="skillsGrid">
      <div class="skill">Web Development — React, Performance, SSR</div>
      <div class="skill">Animation — CSS, WebGL, SVG</div>
      <div class="skill">Design Systems — Accessible & Scalable</div>
      <div class="skill">Tooling — Build pipelines, CI/CD</div>
      <div class="skill">Creative Logic — Concept → Prototype → Product</div>
      <div class="skill">Optimization — Lighthouse-forward</div>
    </div>
  </div>
</section>

<!-- Work / Code Sample -->
<section class="section" id="work">
  <div class="card" id="cardWork" role="region" aria-labelledby="workTitle">
    <div class="glow-border" id="glowWork" aria-hidden="true"></div>
    <h3 id="workTitle">Code & Craft</h3>
    <p>Below is a live “code rain” behind the hero — but here’s a small snippet to show the kind of engineer I am.</p>
    <div class="divider"></div>
    <div class="code-sample" aria-live="polite">
<pre><code>// tiny reactive state example (vanilla)
function createState(initial) {
  let value = initial;
  const subs = new Set();
  return {
    get: () => value,
    set: (v) => { value = v; subs.forEach(s => s(value)); },
    subscribe: (fn) => { subs.add(fn); return () => subs.delete(fn); }
  }
}
</code></pre>
    </div>
    <div class="cta-row">
      <button class="btn btn-primary" id="btnDemo">Trigger Confetti</button>
      <button class="btn" id="btnMore">More Tricks</button>
    </div>
  </div>
</section>

<!-- Contact / CTA -->
<section class="section" id="contact">
  <div class="card" id="cardContact" role="region" aria-labelledby="contactTitle">
    <div class="glow-border" id="glowContact" aria-hidden="true"></div>
    <h3 id="contactTitle">Let's Build Something</h3>
    <p>Want something cinematic or delightfully over-engineered? I love ambitious projects. Send a message, and let’s make it unforgettable.</p>
    <div class="divider"></div>
    <div style="display:flex; gap:12px; justify-content:center; align-items:center;">
      <input id="email" type="email" placeholder="your@email.com" style="padding:12px 16px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--fg);min-width:280px" />
      <button class="btn btn-primary" id="sendBtn">Send</button>
    </div>
  </div>
</section>

<!-- Footer -->
<footer role="contentinfo">© 2025 Ashish — All handcrafted with obsessive detail.</footer>

<!-- Particle container (top-level) -->
<canvas id="particleCanvas" style="position:fixed; inset:0; z-index:9000; pointer-events:none;"></canvas>

<script>
/* =========================================================
   CONFIG / FEATURE FLAGS
   Toggle here to disable heavy effects for debugging or performance.
   ========================================================= */
const CONFIG = {
  ENABLE_EFFECTS: true,            // master switch
  ENABLE_SOUND: false,             // start muted; toggle via UI
  ENABLE_PARTICLES: true,
  ENABLE_BLOBS: true,
  ENABLE_CODE_RAIN: true,
  MAX_PARTICLES: 500,
  PREFERS_REDUCED_MOTION: window.matchMedia('(prefers-reduced-motion: reduce)').matches
};

/* =========================================================
   Utilities
   ========================================================= */
const $ = (sel, root=document) => root.querySelector(sel);
const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
const lerp = (a,b,t) => a + (b-a)*t;
const rand = (a,b=0) => (Math.random()*(a-b))+b;

/* =========================================================
   Cursor: dot + ring + interactions
   ========================================================= */
(function initCursor(){
  const cursor = $('#cursorDot'), ring = $('#cursorRing');
  if(!cursor || CONFIG.PREFERS_REDUCED_MOTION) { if(cursor) cursor.style.display='none'; if(ring) ring.style.display='none'; return; }
  let mx = innerWidth/2, my = innerHeight/2;
  let ringX = mx, ringY = my;
  let visible = true;
  const ease = 0.18;

  function loop(){
    ringX += (mx - ringX) * ease;
    ringY += (my - ringY) * ease;
    ring.style.left = ringX + 'px';
    ring.style.top = ringY + 'px';
    requestAnimationFrame(loop);
  }
  loop();

  document.addEventListener('mousemove', (e)=>{
    mx = e.clientX; my = e.clientY;
    cursor.style.left = e.clientX+'px'; cursor.style.top = e.clientY+'px';
    ring.style.left = e.clientX+'px'; ring.style.top = e.clientY+'px';
    if(!visible){ cursor.style.opacity=1; ring.style.opacity=1; visible=true; }
  }, {passive:true});

  // expand on hover of interactives
  const hoverables = ['.btn', 'button', 'a', 'input', '.skill'];
  function addHoverHandlers(sel){
    $$(sel).forEach(el=>{
      el.addEventListener('mouseenter', ()=> { cursor.classList.add('expand'); ring.classList.remove('hidden'); });
      el.addEventListener('mouseleave', ()=> { cursor.classList.remove('expand'); });
    });
  }
  hoverables.forEach(addHoverHandlers);

  // ring hide/show on blur
  window.addEventListener('blur', ()=> { cursor.style.opacity=0; ring.style.opacity=0; visible=false; });
  window.addEventListener('focus', ()=> { cursor.style.opacity=1; ring.style.opacity=1; visible=true; });

  // ripple on click
  document.addEventListener('click', (e)=>{
    const el = document.createElement('div');
    el.style.position='fixed';
    el.style.left = e.clientX+'px';
    el.style.top = e.clientY+'px';
    el.style.width = el.style.height = '10px';
    el.style.border = '2px solid rgba(255,255,255,0.14)';
    el.style.borderRadius='50%';
    el.style.pointerEvents='none';
    el.style.transform='translate(-50%,-50%)';
    el.style.zIndex = 99999;
    el.style.transition = 'transform 650ms cubic-bezier(.2,.9,.2,1), opacity 650ms';
    document.body.appendChild(el);
    requestAnimationFrame(()=> {
      el.style.transform = 'translate(-50%,-50%) scale(12)';
      el.style.opacity = '0';
    });
    setTimeout(()=> el.remove(), 750);
  }, {passive:true});
})();

/* =========================================================
   Cinematic bokeh / glows (generated DOM) - subtle, cheap
   ========================================================= */
(function initBokeh(){
  if(!CONFIG.ENABLE_EFFECTS) return;
  const container = document.getElementById('bokehLayer');
  if(!container) return;
  const count = 10;
  for(let i=0;i<count;i++){
    const el = document.createElement('div');
    el.style.position='absolute';
    el.style.left = Math.random()*100 + 'vw';
    el.style.top  = Math.random()*100 + 'vh';
    const size = 60 + Math.random()*260;
    el.style.width = el.style.height = size + 'px';
    el.style.borderRadius = '50%';
    el.style.background = Math.random()>0.5 ? 'rgba(0,240,255,0.035)' : 'rgba(255,107,53,0.03)';
    el.style.filter = 'blur(36px)';
    el.style.opacity = 0.6;
    el.style.transform = `translate(-50%,-50%)`;
    container.appendChild(el);
  }
})();

/* =========================================================
   Morphing blob (SVG path morph)
   ========================================================= */
(function initBlob(){
  if(!CONFIG.ENABLE_EFFECTS || !CONFIG.ENABLE_BLOBS || CONFIG.PREFERS_REDUCED_MOTION) return;
  const path = document.getElementById('blobPath');
  if(!path) return;
  // Several random blob path presets (closed path)
  const presets = [
    "M416.7,37.6C482.2,54.8,539.2,103.8,569.6,162.6C601.6,223.1,608.6,292.4,573.1,341.1C537.6,389.8,459.6,417,392.5,435.9C325.3,454.8,269,465.6,217.6,437.9C166.1,410.1,119.5,344,103.8,281.4C88.1,218.8,103.3,160.6,141.6,120.9C179.8,81.2,240.9,60.1,302.8,46.8C364.7,33.5,350.9,20.4,416.7,37.6Z",
    "M441.8,24.7C500.1,42.1,552.6,86.2,576.9,138.2C603.9,196.5,592.9,262.8,560.0,311.8C527.1,360.9,472.1,382.9,415.7,405.6C359.3,428.4,300.5,451.9,245.8,432.9C191.2,413.9,140.5,352.4,120.9,296.8C101.3,241.2,112.8,191.4,140.3,149.6C167.9,107.9,211.7,73.3,266.7,53.0C321.8,32.7,383.5,7.3,441.8,24.7Z",
    "M449.6,34.0C487.9,57.1,520.4,96.0,535.1,143.3C550.8,193.7,544.8,252.4,512.3,295.0C480.2,337.2,422.6,362.5,366.1,391.0C309.6,419.6,255.5,451.4,199.7,431.2C144.0,411.1,86.6,339.9,84.9,285.4C83.2,230.9,137.0,192.2,173.0,151.9C209.1,111.7,227.0,63.1,272.4,45.4C317.7,27.7,411.4,10.9,449.6,34.0Z"
  ];
  // pick a random one and animate morphs
  let idx = 0;
  const dur = 6000;
  function morph(){
    const next = presets[(idx+1)%presets.length];
    const start = path.getAttribute('d') || presets[0];
    if(!start) path.setAttribute('d', presets[0]);
    // use simple interpolation via SVG animateElement is not universally supported; we'll implement via custom stepper
    const startTime = performance.now();
    function step(now){
      const t = Math.min(1, (now - startTime)/dur);
      // naive crossfade between two SVG path strings by swapping at mid-point (acceptable)
      if(t < 0.5) {
        path.setAttribute('d', start);
      } else {
        path.setAttribute('d', next);
      }
      if(t < 1) requestAnimationFrame(step)
      else { idx = (idx+1) % presets.length; setTimeout(morph, 1200 + Math.random()*1400); }
    }
    requestAnimationFrame(step);
  }
  path.setAttribute('d', presets[0]);
  setTimeout(morph, 900);
})();

/* =========================================================
   Code Rain (Matrix-like) — Canvas-based, optimized
   ========================================================= */
(function initCodeRain(){
  if(!CONFIG.ENABLE_EFFECTS || !CONFIG.ENABLE_CODE_RAIN || CONFIG.PREFERS_REDUCED_MOTION) return;
  const canvas = document.getElementById('codeRain');
  const ctx = canvas.getContext('2d');
  let width = canvas.width = innerWidth;
  let height = canvas.height = innerHeight;
  const cols = Math.floor(width / 16);
  const yPositions = new Array(cols).fill(0);

  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789<>/{}[]()@#$%^&*~`+=";
  function draw(){
    if(!CONFIG.ENABLE_CODE_RAIN) return;
    ctx.fillStyle = 'rgba(0,0,0,0.12)';
    ctx.fillRect(0,0,width,height);
    ctx.font = '12px monospace';
    for(let i=0;i<cols;i++){
      const text = chars.charAt(Math.floor(Math.random() * chars.length));
      const x = i * 16;
      ctx.fillStyle = i%6 === 0 ? 'rgba(255,255,255,0.82)' : 'rgba(0,240,255,0.18)';
      ctx.fillText(text, x, yPositions[i]*16);
      yPositions[i]++;
      if(yPositions[i]*16 > height && Math.random() > 0.975) yPositions[i] = 0;
    }
    requestAnimationFrame(draw);
  }

  window.addEventListener('resize', ()=>{
    width = canvas.width = innerWidth;
    height = canvas.height = innerHeight;
  }, {passive:true});

  draw();
})();

/* =========================================================
   Scroll reveal + scroll-synced glowing borders
   ========================================================= */
(function initScrollReveal(){
  const cards = $$('.card');
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(ent=>{
      if(ent.isIntersecting) {
        ent.target.classList.add('visible');
        // shrink glow border animation
        const glow = ent.target.querySelector('.glow-border');
        if(glow) glow.style.opacity = 1;
        observer.unobserve(ent.target);
      }
    });
  }, {threshold: 0.18});
  cards.forEach(c => observer.observe(c));

  // scroll-synced border intensity based on viewport center
  function onScroll(){
    const mid = innerHeight/2;
    cards.forEach(card=>{
      const rect = card.getBoundingClientRect();
      const dist = Math.abs(rect.top + rect.height/2 - mid);
      const t = clamp(1 - (dist / (innerHeight/1.8)), 0, 1);
      const glow = card.querySelector('.glow-border');
      if(glow) {
        glow.style.transform = `scale(${lerp(0.98,1.02,t)})`;
        glow.style.opacity = (0.04 + t*0.9);
      }
    });
  }
  if(!CONFIG.PREFERS_REDUCED_MOTION) {
    window.addEventListener('scroll', throttle(onScroll, 60), {passive:true});
    onScroll();
  }

  // simple throttle
  function throttle(fn, wait){
    let last = 0;
    return (...args) => {
      const now = Date.now();
      if(now - last > wait){ last = now; fn(...args); }
    }
  }
})();

/* =========================================================
   3D tilt / parallax on hero + cards (mouse move)
   ========================================================= */
(function initTilt(){
  if(CONFIG.PREFERS_REDUCED_MOTION) return;
  const hero = $('#heroContent');
  const cardEls = $$('.card');
  const bound = $('#hero');
  function applyTilt(el, e, intensity=0.015, maxRot=12){
    const rect = el.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const dx = e.clientX - cx;
    const dy = e.clientY - cy;
    const rx = clamp((dy / rect.height) * maxRot * -1, -maxRot, maxRot);
    const ry = clamp((dx / rect.width) * maxRot, -maxRot, maxRot);
    el.style.transform = `translateZ(20px) rotateX(${rx}deg) rotateY(${ry}deg)`;
    el.style.transition = 'transform 220ms cubic-bezier(.2,.9,.2,1)';
  }
  if(hero){
    bound.addEventListener('mousemove', (e) => {
      applyTilt(hero, e, 0.02, 10);
    }, {passive:true});
    bound.addEventListener('mouseleave', ()=> hero.style.transform = '');
  }
  cardEls.forEach(card=>{
    card.addEventListener('mousemove', (e)=> applyTilt(card, e, 0.02, 6), {passive:true});
    card.addEventListener('mouseleave', ()=> card.style.transform = '');
  });
})();

/* =========================================================
   Particle / confetti system using canvas
   ========================================================= */
(function initParticles(){
  if(!CONFIG.ENABLE_EFFECTS || !CONFIG.ENABLE_PARTICLES) return;
  const canvas = document.getElementById('particleCanvas');
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;
  const particles = [];
  const max = CONFIG.MAX_PARTICLES;

  // utility: create single particle
  function createParticle(x,y,opts={}){
    return {
      x:x, y:y,
      vx: (Math.random()-0.5)* (opts.spread||18),
      vy: (Math.random()-0.8)*(opts.force||12),
      life: 80 + Math.random()*80,
      age:0,
      size: 4 + Math.random()*8,
      color: opts.color || (Math.random()>0.5 ? 'rgba(0,240,255,0.95)' : 'rgba(255,107,53,0.95)'),
      gravity: 0.38 + Math.random()*0.2,
      drag: 0.995,
      rotate: Math.random()*360
    };
  }

  function emit(x,y,count=24,opts={}){
    for(let i=0;i<count;i++){
      if(particles.length < max) particles.push(createParticle(x,y, opts));
    }
  }

  function resize(){ w=canvas.width=innerWidth; h=canvas.height=innerHeight; }
  window.addEventListener('resize', resize, {passive:true});

  function step(){
    ctx.clearRect(0,0,w,h);
    // draw and update
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.vx *= p.drag; p.vy *= p.drag;
      p.vy += p.gravity*0.12;
      p.x += p.vx; p.y += p.vy;
      p.age++;
      const lifeRatio = 1 - p.age / p.life;
      ctx.save();
      ctx.globalAlpha = lifeRatio;
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rotate * Math.PI / 180);
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
      ctx.restore();
      if(p.age > p.life || p.y > h + 200) particles.splice(i,1);
    }
    requestAnimationFrame(step);
  }
  step();

  // Expose emitter to window for triggers
  window.__emitParticles = emit;

  // Example: emit when someone clicks primary CTA
  $('#btnContact')?.addEventListener('click', (e)=>{
    const rect = e.target.getBoundingClientRect();
    emit(rect.left + rect.width/2, rect.top + rect.height/2, 40, {force:14});
  });

  $('#btnDemo')?.addEventListener('click', (e)=>{
    const rect = e.target.getBoundingClientRect();
    emit(rect.left + rect.width/2, rect.top + rect.height/2, 120, {force:18});
  });

  $('#sendBtn')?.addEventListener('click', (e)=>{
    emit(innerWidth/2, innerHeight/2, 100, {force:20});
    alert('Pretend email sent — more backend hooks can be added.');
  });

})();

/* =========================================================
   Simple ambient WebAudio (procedural pad) — togglable
   Note: respects autoplay policies; user must interact to enable sound.
   ========================================================= */
(function initAudio(){
  if(!CONFIG.ENABLE_SOUND) return;
  let ctx, gain, osc1, osc2;
  const btn = $('#toggleSound');
  let playing = false;

  async function startSound(){
    if(playing) return;
    try{
      ctx = new (window.AudioContext || window.webkitAudioContext)();
      gain = ctx.createGain(); gain.gain.value = 0.02;
      osc1 = ctx.createOscillator(); osc2 = ctx.createOscillator();
      osc1.type = 'sine'; osc2.type = 'sine';
      osc1.frequency.value = 110;
      osc2.frequency.value = 174.61;
      // gentle detune + amplitude modulation
      osc1.detune.value = -20; osc2.detune.value=20;
      const lfo = ctx.createOscillator(); const lfoGain = ctx.createGain();
      lfo.frequency.value = 0.05; lfoGain.gain.value = 0.02;
      lfo.connect(lfoGain); lfoGain.connect(gain.gain);
      osc1.connect(gain); osc2.connect(gain); gain.connect(ctx.destination);
      osc1.start(); osc2.start(); lfo.start();
      playing = true; btn.textContent = 'Sound: On';
    }catch(e){ console.warn('Sound init failed', e); }
  }
  function stopSound(){
    if(!playing) return;
    osc1.stop(); osc2.stop();
    ctx.close();
    playing=false; btn.textContent = 'Sound: Off';
  }
  btn.addEventListener('click', ()=>{
    if(!playing) startSound(); else stopSound();
  });
})();

/* =========================================================
   Scroll-triggered confetti bursts & fun triggers
   ========================================================= */
(function initScrollTriggers(){
  const skillSection = $('#about');
  if(!skillSection) return;
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(ent => {
      if(ent.isIntersecting){
        // burst confetti at center
        const rect = ent.target.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/3;
        if(window.__emitParticles) window.__emitParticles(cx, cy, 120, {force:18});
        observer.unobserve(ent.target);
      }
    });
  }, {threshold:0.35});
  observer.observe(skillSection);
})();

/* =========================================================
   Buttons / interactions / extras
   ========================================================= */
(function interactions(){
  // explore button: smooth scroll to about
  $('#btnScroll')?.addEventListener('click', ()=> document.getElementById('about').scrollIntoView({behavior:'smooth'}));

  $('#toggleEffects')?.addEventListener('click', (e)=>{
    CONFIG.ENABLE_EFFECTS = !CONFIG.ENABLE_EFFECTS;
    e.target.textContent = 'Effects: ' + (CONFIG.ENABLE_EFFECTS ? 'On' : 'Off');
    // subtle page feedback
    document.body.style.transition = 'background .6s linear';
    document.body.style.backgroundImage = CONFIG.ENABLE_EFFECTS
      ? "radial-gradient(circle at 20% 20%, rgba(0,240,255,0.03), transparent 8%), radial-gradient(900px 500px at 90% 85%, rgba(255,107,53,0.03), transparent 10%), linear-gradient(180deg, var(--bg-1), var(--bg-0))"
      : "linear-gradient(180deg, #070707, #030303)";
  });

  // demo trigger: more tricks
  $('#btnMore')?.addEventListener('click', ()=>{
    // big center emitter + title jitter
    if(window.__emitParticles) window.__emitParticles(innerWidth/2, innerHeight/2, 360, {force:28});
    const title = $('#mainTitle');
    title.animate([{transform:'translateY(0)'},{transform:'translateY(-8px)'},{transform:'translateY(0)'}], {duration:700, easing:'cubic-bezier(.2,.9,.2,1)'});
  });

  // simple keyboard shortcut: press "K" to trigger confetti
  window.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase() === 'k') {
      if(window.__emitParticles) window.__emitParticles(innerWidth/2, innerHeight/2, 220, {force:20});
    }
  });
})();

/* =========================================================
   Accessibility & reduced-motion friendly cleanup
   ========================================================= */
(function accessibility(){
  if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){
    // remove or tone down heavy visuals
    const canvases = $$('canvas');
    canvases.forEach(c=> c.style.display='none');
    const bokeh = document.getElementById('bokehLayer');
    if(bokeh) bokeh.style.display='none';
    const particles = document.getElementById('particleCanvas');
    if(particles) particles.style.display='none';
  }
})();

/* =========================================================
   Performance: gentle housekeeping
   ========================================================= */
(function housekeeping(){
  // reduce intervals if page invisible
  document.addEventListener('visibilitychange', ()=>{
    if(document.hidden){
      // pause heavy loops if necessary (code rain uses rAF which auto-pauses in many browsers)
    }
  });
})();
</script>

</body>
</html>
